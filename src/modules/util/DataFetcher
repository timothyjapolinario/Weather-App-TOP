import { mapRawToWeatherObject } from "./WeatherMapper";
const weatherAPIKey = "505fa3efb086bd23d8571b744ea64b69";
const getWeather = async function dataFetcherFromWeatherAPI(location) {
  try {
    const weatherData = fetch(
      `https://api.openweathermap.org/data/2.5/weather?q=${location}&appid=${weatherAPIKey}`,
      { mode: "cors" }
    )
      .then((response) => {
        //console.log(response);
        return response.json();
      })
      .then((data) => {
        console.log(data);
        const weather = mapRawToWeatherObject(data);
        console.log(weather);
        return weather;
      });
    return weatherData;
  } catch (error) {
    console.log("Error fetching data of weather");
  }
};

export { getWeather, weatherAPIKey };
